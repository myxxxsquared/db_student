<!DOCTYPE html>
<html class="theme theme-white">
<head>
<meta charset="utf-8">
<title>上机实习之MongoDB篇</title>
<link href="https://www.zybuluo.com/static/assets/template-theme-white.css" rel="stylesheet" media="screen">
<style type="text/css">

#wmd-preview h1  {
    color: #0077bb; /* 将标题改为蓝色 */
}</style>
</head>
<body class="theme theme-white">
<div id="wmd-preview" class="wmd-preview wmd-preview-full-reader"><div class="md-section-divider"></div><div class="md-section-divider"></div><h1 data-anchor-id="lxsc" id="上机实习之mongodb篇">上机实习之MongoDB篇</h1><p data-anchor-id="pf1k"><code>大数据管理技术</code> <code>NoSQL</code> <code>MongoDB</code></p><hr><div class="md-section-divider"></div><h2 data-anchor-id="qbsb" id="目录"><i class="icon-list"></i> <strong>目录</strong></h2><p data-anchor-id="osu2"><div class="toc">
<ul>
<li><a href="#上机实习之mongodb篇">上机实习之MongoDB篇</a><ul>
<li><a href="#目录"> 目录</a></li>
<li><a href="#mongodb的安装"> MongoDB的安装</a><ul>
<li><a href="#linux环境">Linux环境</a></li>
<li><a href="#windows环境">Windows环境</a></li>
</ul>
</li>
<li><a href="#mongodb的使用"> MongoDB的使用</a><ul>
<li><a href="#数据库操作">数据库操作</a></li>
<li><a href="#集合操作">集合操作</a></li>
<li><a href="#文档操作">文档操作</a></li>
</ul>
</li>
<li><a href="#java中使用mongodb"> Java中使用MongoDB</a></li>
<li><a href="#python中使用mongodb"> Python中使用MongoDB</a></li>
</ul>
</li>
</ul>
</div>
</p><hr><div class="md-section-divider"></div><h2 data-anchor-id="vcmo" id="mongodb的安装"><i class="icon-gear"></i> <strong>MongoDB的安装</strong></h2><div class="md-section-divider"></div><h3 data-anchor-id="p6pj" id="linux环境">Linux环境</h3><p data-anchor-id="2p8f">1.下载安装包并解压，将文件夹移动至指定位置，并将其可执行文件添加到PATH中</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="83ht"><ol class="linenums"><li class="L0"><code><span class="pln">wget https</span><span class="pun">:</span><span class="com">//fastdl.mongodb.org/linux/mongodb-linux-x86_64-3.6.3.tgz</span></code></li><li class="L1"><code><span class="pln">tar </span><span class="pun">-</span><span class="pln">zxvf mongodb</span><span class="pun">-</span><span class="pln">linux</span><span class="pun">-</span><span class="pln">x86_64</span><span class="pun">-</span><span class="lit">3.6</span><span class="pun">.</span><span class="lit">3.tgz</span></code></li><li class="L2"><code><span class="pln">mv  mongodb</span><span class="pun">-</span><span class="pln">linux</span><span class="pun">-</span><span class="pln">x86_64</span><span class="pun">-</span><span class="lit">3.6</span><span class="pun">.</span><span class="lit">3</span><span class="str">/ /</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">mongodb  </span></code></li><li class="L3"><code><span class="kwd">export</span><span class="pln"> PATH</span><span class="pun">=</span><span class="str">/usr/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">mongodb</span><span class="pun">/</span><span class="pln">bin</span><span class="pun">:</span><span class="pln">$PATH</span></code></li></ol></pre><p data-anchor-id="w2m6">2.创建数据库目录,并启动MongoDB服务</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="y30s"><ol class="linenums"><li class="L0"><code><span class="pun">~</span><span class="pln">$ cd </span><span class="pun">/</span></code></li><li class="L1"><code><span class="str">/$ mkdir -p /</span><span class="pln">data</span><span class="pun">/</span><span class="pln">db</span></code></li><li class="L2"><code><span class="pun">/</span><span class="pln">$ cd </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">mongodb</span><span class="pun">/</span><span class="pln">bin</span><span class="pun">/</span></code></li><li class="L3"><code><span class="str">/usr/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">mongodb</span><span class="pun">/</span><span class="pln">bin$ </span><span class="pun">./</span><span class="pln">mongod</span></code></li></ol></pre><p data-anchor-id="hm7p">3.连接MongoDB，进入Shell模式</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="onu1"><ol class="linenums"><li class="L0"><code><span class="pun">~</span><span class="pln">$ cd </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">mongodb</span><span class="pun">/</span><span class="pln">bin</span><span class="pun">/</span></code></li><li class="L1"><code><span class="str">/usr/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">mongodb</span><span class="pun">/</span><span class="pln">bin$ </span><span class="pun">./</span><span class="pln">mongo</span></code></li></ol></pre><p data-anchor-id="f83p">显示如下信息表示连接成功：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="129c"><ol class="linenums"><li class="L0"><code><span class="typ">MongoDB</span><span class="pln"> shell version v3</span><span class="pun">.</span><span class="lit">6.3</span></code></li><li class="L1"><code><span class="pln">connecting to</span><span class="pun">:</span><span class="pln"> mongodb</span><span class="pun">:</span><span class="com">//127.0.0.1:27017</span></code></li><li class="L2"><code><span class="typ">MongoDB</span><span class="pln"> server version</span><span class="pun">:</span><span class="pln"> </span><span class="lit">3.6</span><span class="pun">.</span><span class="lit">3</span></code></li><li class="L3"><code><span class="typ">Welcome</span><span class="pln"> to the </span><span class="typ">MongoDB</span><span class="pln"> shell</span><span class="pun">.</span></code></li><li class="L4"><code><span class="pun">...</span></code></li><li class="L5"><code><span class="pun">...</span></code></li><li class="L6"><code><span class="pun">&gt;</span></code></li></ol></pre><div class="md-section-divider"></div><h3 data-anchor-id="3cv9" id="windows环境">Windows环境</h3><p data-anchor-id="m8r7">1.下载安装包。在 <a href="https://www.mongodb.com/download-center?jmp=nav#community" target="_blank">MongoDB官网</a>，在CommunityServer标签页下下载.msi安装包。 <br>
2.下载完成后打开.msi安装包，安装过程略。假设我们的安装路径为D:\MongoDB\ <br>
（安装过程会有一页选择是否安装Compass，这是MongoDB的图形化界面，本文档不做介绍） <br>
3.在D盘创建data文件夹，在db和log文件夹，分别用以存放数据库和日志 <br>
4.在安装路径下创建配置文件： D:\MongoDB\mongod.cfg，内容为：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="47wc"><ol class="linenums"><li class="L0"><code><span class="pln">systemLog</span><span class="pun">:</span></code></li><li class="L1"><code><span class="pln">    destination</span><span class="pun">:</span><span class="pln"> file</span></code></li><li class="L2"><code><span class="pln">    path</span><span class="pun">:</span><span class="pln"> c</span><span class="pun">:</span><span class="pln">\data\log\mongod</span><span class="pun">.</span><span class="pln">log</span></code></li><li class="L3"><code><span class="pln">storage</span><span class="pun">:</span></code></li><li class="L4"><code><span class="pln">    dbPath</span><span class="pun">:</span><span class="pln"> c</span><span class="pun">:</span><span class="pln">\data\db</span></code></li></ol></pre><p data-anchor-id="h44s">5.以管理员模式打开命令行，输入如下命令，使配置文件生效，并启动MongoDB服务端</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="h8mb"><ol class="linenums"><li class="L0"><code><span class="pln">D</span><span class="pun">:</span><span class="pln">\MongoDB\b</span><span class="kwd">in</span><span class="pln">\mongod</span><span class="pun">.</span><span class="pln">exe </span><span class="pun">--</span><span class="pln">config </span><span class="str">"D:\MongoDB\mongod.cfg"</span><span class="pln"> </span><span class="pun">--</span><span class="pln">install</span></code></li><li class="L1"><code><span class="pln">net start </span><span class="typ">MongoDB</span></code></li></ol></pre><p data-anchor-id="lmua">如需关闭：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="30s6"><ol class="linenums"><li class="L0"><code><span class="pln">net stop </span><span class="typ">MongoDB</span></code></li></ol></pre><p data-anchor-id="lc5l">6.连接MongoDB服务,进入Shell模式</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="n7z9"><ol class="linenums"><li class="L0"><code><span class="pln">D</span><span class="pun">:</span><span class="pln">\&gt; D</span><span class="pun">:</span><span class="pln">\Workers\MongoDB\b</span><span class="kwd">in</span><span class="pln">\mongo</span><span class="pun">.</span><span class="pln">exe</span></code></li></ol></pre><p data-anchor-id="3kon">显示如下信息表示连接成功：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="sur9"><ol class="linenums"><li class="L0"><code><span class="typ">MongoDB</span><span class="pln"> shell version v3</span><span class="pun">.</span><span class="lit">6.3</span></code></li><li class="L1"><code><span class="pln">connecting to</span><span class="pun">:</span><span class="pln"> mongodb</span><span class="pun">:</span><span class="com">//127.0.0.1:27017</span></code></li><li class="L2"><code><span class="typ">MongoDB</span><span class="pln"> server version</span><span class="pun">:</span><span class="pln"> </span><span class="lit">3.6</span><span class="pun">.</span><span class="lit">3</span></code></li><li class="L3"><code><span class="pun">...</span></code></li><li class="L4"><code><span class="pun">...</span></code></li><li class="L5"><code><span class="pun">&gt;</span></code></li></ol></pre><hr><div class="md-section-divider"></div><h2 data-anchor-id="q5yi" id="mongodb的使用"><i class="icon-th-large"></i> <strong>MongoDB的使用</strong></h2><div class="md-section-divider"></div><h3 data-anchor-id="epx7" id="数据库操作">数据库操作</h3><p data-anchor-id="otoy">1.查询现有所有数据库</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="1r7x"><ol class="linenums"><li class="L0"><code><span class="pun">&gt;</span><span class="pln"> show dbs</span></code></li><li class="L1"><code><span class="pln">admin   </span><span class="lit">0.000GB</span></code></li><li class="L2"><code><span class="pln">config  </span><span class="lit">0.000GB</span></code></li><li class="L3"><code><span class="kwd">local</span><span class="pln">   </span><span class="lit">0.000GB</span></code></li></ol></pre><p data-anchor-id="rqsn">2.查询当前数据库。系统默认使用test。 <br>
在上面列表未出现test是由于它目前是空的，还未包含数据。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="xi8c"><ol class="linenums"><li class="L0"><code><span class="pun">&gt;</span><span class="pln"> db</span></code></li><li class="L1"><code><span class="pln">test</span></code></li></ol></pre><p data-anchor-id="v63m">3.创建数据库</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="rmc0"><ol class="linenums"><li class="L0"><code><span class="pun">&gt;</span><span class="pln"> </span><span class="kwd">use</span><span class="pln"> bigdata</span></code></li><li class="L1"><code><span class="pln">switched to db bigdata</span></code></li></ol></pre><p data-anchor-id="lw93">4.写入数据，再查询数据库列表</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="ah8y"><ol class="linenums"><li class="L0"><code><span class="pun">&gt;</span><span class="pln"> db</span><span class="pun">.</span><span class="pln">bigdata</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">({</span><span class="str">"teacher"</span><span class="pun">:</span><span class="str">"LijunChen"</span><span class="pun">})</span></code></li><li class="L1"><code><span class="typ">WriteResult</span><span class="pun">({</span><span class="pln"> </span><span class="str">"nInserted"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">})</span></code></li><li class="L2"><code><span class="pun">&gt;</span><span class="pln"> show dbs</span></code></li><li class="L3"><code><span class="pln">admin    </span><span class="lit">0.000GB</span></code></li><li class="L4"><code><span class="pln">bigdata  </span><span class="lit">0.000GB</span></code></li><li class="L5"><code><span class="pln">config   </span><span class="lit">0.000GB</span></code></li><li class="L6"><code><span class="kwd">local</span><span class="pln">    </span><span class="lit">0.000GB</span></code></li></ol></pre><p data-anchor-id="0kje">5.删除当前数据库</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="pw2d"><ol class="linenums"><li class="L0"><code><span class="pun">&gt;</span><span class="pln"> db</span><span class="pun">.</span><span class="pln">dropDatabase</span><span class="pun">()</span></code></li><li class="L1"><code><span class="pun">{</span><span class="pln"> </span><span class="str">"dropped"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"bigdata"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"ok"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><h3 data-anchor-id="lmrw" id="集合操作">集合操作</h3><p data-anchor-id="cyka">1.在test数据库中创建student集合</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="a57i"><ol class="linenums"><li class="L0"><code><span class="pun">&gt;</span><span class="pln"> </span><span class="kwd">use</span><span class="pln"> test</span></code></li><li class="L1"><code><span class="pln">switched to db test</span></code></li><li class="L2"><code><span class="pun">&gt;</span><span class="pln"> db</span><span class="pun">.</span><span class="pln">createCollection</span><span class="pun">(</span><span class="str">"student"</span><span class="pun">)</span></code></li><li class="L3"><code><span class="pun">{</span><span class="pln"> </span><span class="str">"ok"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="5gdf">2.创建集合的相关参数</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="ayi2"><ol class="linenums"><li class="L0"><code><span class="pun">&gt;</span><span class="pln"> db</span><span class="pun">.</span><span class="pln">createCollection</span><span class="pun">(</span><span class="str">"score"</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> capped </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span><span class="pln"> autoIndexId </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span><span class="pln"> size </span><span class="pun">:</span><span class="pln"> </span></code></li><li class="L1"><code><span class="pln">   </span><span class="lit">10000</span><span class="pun">,</span><span class="pln"> max </span><span class="pun">:</span><span class="pln"> </span><span class="lit">100</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">)</span></code></li><li class="L2"><code><span class="pun">{</span><span class="pln"> </span><span class="str">"ok"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="6843">其中参数的含义如下：</p><blockquote data-anchor-id="k56e" class="white-blockquote">
  <ul>
  <li>capped(true/<strong>false</strong>)：创建固定大小的集合，此项为true时需设置size的值</li>
  <li>size：为固定大小集合设置最大值（字节）</li>
  <li>autoIndexId(true/<strong>false</strong>)：若此项为 true，自动在 _id 字段创建索引</li>
  <li>max：设置固定集合中包含文档的最大数量</li>
  </ul>
</blockquote><p data-anchor-id="0jra">3.删除当前集合的某个数据库</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="yqqf"><ol class="linenums"><li class="L0"><code><span class="pun">&gt;</span><span class="pln">db</span><span class="pun">.</span><span class="pln">student</span><span class="pun">.</span><span class="pln">drop</span><span class="pun">()</span></code></li><li class="L1"><code><span class="kwd">true</span></code></li></ol></pre><div class="md-section-divider"></div><h3 data-anchor-id="00hd" id="文档操作">文档操作</h3><p data-anchor-id="2ooy">1.增。向student集合加入张三同学的文档</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="dbir"><ol class="linenums"><li class="L0"><code><span class="pun">&gt;</span><span class="pln"> db</span><span class="pun">.</span><span class="pln">student</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">({</span><span class="pln">name</span><span class="pun">:</span><span class="str">'ZhangSan'</span><span class="pun">,</span><span class="pln">major</span><span class="pun">:</span><span class="str">'CS'</span><span class="pun">,</span><span class="pln">score</span><span class="pun">:</span><span class="lit">59</span><span class="pun">,</span><span class="pln">skill</span><span class="pun">:[</span><span class="str">'Redis'</span><span class="pun">,</span><span class="str">'MongoDB'</span><span class="pun">,</span><span class="str">'Cassandra'</span><span class="pun">]})</span></code></li><li class="L1"><code><span class="typ">WriteResult</span><span class="pun">({</span><span class="pln"> </span><span class="str">"nInserted"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">})</span></code></li><li class="L2"><code><span class="pun">&gt;</span><span class="pln"> db</span><span class="pun">.</span><span class="pln">student</span><span class="pun">.</span><span class="pln">find</span><span class="pun">()</span></code></li><li class="L3"><code><span class="pun">{</span><span class="pln"> </span><span class="str">"_id"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="typ">ObjectId</span><span class="pun">(</span><span class="str">"5ab4c2a228e0721a97dcd394"</span><span class="pun">),</span><span class="pln"> </span><span class="str">"name"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"ZhangSan"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"major"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"CS"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"score"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">59</span><span class="pun">,</span><span class="pln"> </span><span class="str">"skill"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="str">"Redis"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"MongoDB"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Cassandra"</span><span class="pln"> </span><span class="pun">]</span><span class="pln"> </span><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="bkeh">也可先将李四同学的文档写入一个变量，再插入集合。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="hxam"><ol class="linenums"><li class="L0"><code><span class="pun">&gt;</span><span class="pln"> document</span><span class="pun">=({</span><span class="pln">name</span><span class="pun">:</span><span class="str">'LiSi'</span><span class="pun">,</span><span class="pln">major</span><span class="pun">:</span><span class="str">'AI'</span><span class="pun">,</span><span class="pln">score</span><span class="pun">:</span><span class="lit">58</span><span class="pun">,</span><span class="pln">skill</span><span class="pun">:[</span><span class="str">'C++'</span><span class="pun">,</span><span class="str">'Python'</span><span class="pun">,</span><span class="str">'Java'</span><span class="pun">]})</span></code></li><li class="L1"><code><span class="pun">{</span></code></li><li class="L2"><code><span class="pln">    </span><span class="str">"name"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"LiSi"</span><span class="pun">,</span></code></li><li class="L3"><code><span class="pln">    </span><span class="str">"major"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"AI"</span><span class="pun">,</span></code></li><li class="L4"><code><span class="pln">    </span><span class="str">"score"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">58</span><span class="pun">,</span></code></li><li class="L5"><code><span class="pln">    </span><span class="str">"skill"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span></code></li><li class="L6"><code><span class="pln">        </span><span class="str">"C++"</span><span class="pun">,</span></code></li><li class="L7"><code><span class="pln">        </span><span class="str">"Python"</span><span class="pun">,</span></code></li><li class="L8"><code><span class="pln">        </span><span class="str">"Java"</span></code></li><li class="L9"><code><span class="pln">    </span><span class="pun">]</span></code></li><li class="L0"><code><span class="pun">}</span></code></li><li class="L1"><code><span class="pun">&gt;</span><span class="pln"> db</span><span class="pun">.</span><span class="pln">student</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">(</span><span class="pln">document</span><span class="pun">)</span></code></li><li class="L2"><code><span class="typ">WriteResult</span><span class="pun">({</span><span class="pln"> </span><span class="str">"nInserted"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">})</span></code></li><li class="L3"><code><span class="pun">&gt;</span><span class="pln"> db</span><span class="pun">.</span><span class="pln">student</span><span class="pun">.</span><span class="pln">find</span><span class="pun">()</span></code></li><li class="L4"><code><span class="pun">{</span><span class="pln"> </span><span class="str">"_id"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="typ">ObjectId</span><span class="pun">(</span><span class="str">"5ab4c2a228e0721a97dcd394"</span><span class="pun">),</span><span class="pln"> </span><span class="str">"name"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"ZhangSan"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"major"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"CS"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"score"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">59</span><span class="pun">,</span><span class="pln"> </span><span class="str">"skill"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="str">"Redis"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"MongoDB"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Cassandra"</span><span class="pln"> </span><span class="pun">]</span><span class="pln"> </span><span class="pun">}</span></code></li><li class="L5"><code><span class="pun">{</span><span class="pln"> </span><span class="str">"_id"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="typ">ObjectId</span><span class="pun">(</span><span class="str">"5ab4c37d28e0721a97dcd395"</span><span class="pun">),</span><span class="pln"> </span><span class="str">"name"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"LiSi"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"major"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"AI"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"score"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">58</span><span class="pun">,</span><span class="pln"> </span><span class="str">"skill"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="str">"C++"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Python"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Java"</span><span class="pln"> </span><span class="pun">]</span><span class="pln"> </span><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="tai2">2.改。我们将成绩为59的同学捞一下，改成61分。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="a01d"><ol class="linenums"><li class="L0"><code><span class="pun">&gt;</span><span class="pln"> db</span><span class="pun">.</span><span class="pln">student</span><span class="pun">.</span><span class="pln">update</span><span class="pun">({</span><span class="str">'score'</span><span class="pun">:</span><span class="lit">59</span><span class="pun">},{</span><span class="pln">$set</span><span class="pun">:{</span><span class="str">'score'</span><span class="pun">:</span><span class="lit">61</span><span class="pun">}})</span></code></li><li class="L1"><code><span class="typ">WriteResult</span><span class="pun">({</span><span class="pln"> </span><span class="str">"nMatched"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="str">"nUpserted"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="str">"nModified"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">})</span></code></li><li class="L2"><code><span class="pun">&gt;</span><span class="pln"> db</span><span class="pun">.</span><span class="pln">student</span><span class="pun">.</span><span class="pln">find</span><span class="pun">()</span></code></li><li class="L3"><code><span class="pun">{</span><span class="pln"> </span><span class="str">"_id"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="typ">ObjectId</span><span class="pun">(</span><span class="str">"5ab4c2a228e0721a97dcd394"</span><span class="pun">),</span><span class="pln"> </span><span class="str">"name"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"ZhangSan"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"major"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"CS"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"score"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">61</span><span class="pun">,</span><span class="pln"> </span><span class="str">"skill"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="str">"Redis"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"MongoDB"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Cassandra"</span><span class="pln"> </span><span class="pun">]</span><span class="pln"> </span><span class="pun">}</span></code></li><li class="L4"><code><span class="pun">{</span><span class="pln"> </span><span class="str">"_id"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="typ">ObjectId</span><span class="pun">(</span><span class="str">"5ab4c37d28e0721a97dcd395"</span><span class="pun">),</span><span class="pln"> </span><span class="str">"name"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"LiSi"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"major"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"AI"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"score"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">58</span><span class="pun">,</span><span class="pln"> </span><span class="str">"skill"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="str">"C++"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Python"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Java"</span><span class="pln"> </span><span class="pun">]</span><span class="pln"> </span><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="11od">可以看到，张三同学从不及格变成了及格。 <br>
注意，上述命令只会影响第一个成绩为59的同学。若需要将多个同学从59分改成61分，需执行以下命令。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="86o7"><ol class="linenums"><li class="L0"><code><span class="pun">&gt;</span><span class="pln"> db</span><span class="pun">.</span><span class="pln">student</span><span class="pun">.</span><span class="pln">update</span><span class="pun">({</span><span class="str">'score'</span><span class="pun">:</span><span class="lit">59</span><span class="pun">},{</span><span class="pln">$set</span><span class="pun">:{</span><span class="str">'score'</span><span class="pun">:</span><span class="lit">61</span><span class="pun">}},{</span><span class="pln">multi</span><span class="pun">:</span><span class="kwd">true</span><span class="pun">})</span></code></li></ol></pre><p data-anchor-id="otde">3.删。 <br>
首先在student集合中插入两个什么也不会的王五同学</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="ekpn"><ol class="linenums"><li class="L0"><code><span class="pun">&gt;</span><span class="pln"> db</span><span class="pun">.</span><span class="pln">student</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">({</span><span class="pln">name</span><span class="pun">:</span><span class="str">'WangWu'</span><span class="pun">,</span><span class="pln">major</span><span class="pun">:</span><span class="str">'Null'</span><span class="pun">,</span><span class="pln">score</span><span class="pun">:</span><span class="lit">0</span><span class="pun">,</span><span class="pln">skill</span><span class="pun">:[</span><span class="str">'Sleep'</span><span class="pun">]})</span></code></li><li class="L1"><code><span class="typ">WriteResult</span><span class="pun">({</span><span class="pln"> </span><span class="str">"nInserted"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">})</span></code></li><li class="L2"><code><span class="pun">&gt;</span><span class="pln"> db</span><span class="pun">.</span><span class="pln">student</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">({</span><span class="pln">name</span><span class="pun">:</span><span class="str">'WangWu'</span><span class="pun">,</span><span class="pln">major</span><span class="pun">:</span><span class="str">'Null'</span><span class="pun">,</span><span class="pln">score</span><span class="pun">:</span><span class="lit">0</span><span class="pun">,</span><span class="pln">skill</span><span class="pun">:[</span><span class="str">'Sleep'</span><span class="pun">]})</span></code></li><li class="L3"><code><span class="typ">WriteResult</span><span class="pun">({</span><span class="pln"> </span><span class="str">"nInserted"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">})</span></code></li><li class="L4"><code><span class="pun">&gt;</span><span class="pln"> db</span><span class="pun">.</span><span class="pln">student</span><span class="pun">.</span><span class="pln">find</span><span class="pun">()</span></code></li><li class="L5"><code><span class="pun">{</span><span class="pln"> </span><span class="str">"_id"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="typ">ObjectId</span><span class="pun">(</span><span class="str">"5ab4c2a228e0721a97dcd394"</span><span class="pun">),</span><span class="pln"> </span><span class="str">"name"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"ZhangSan"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"major"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"CS"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"score"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">61</span><span class="pun">,</span><span class="pln"> </span><span class="str">"skill"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="str">"Redis"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"MongoDB"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Cassandra"</span><span class="pln"> </span><span class="pun">]</span><span class="pln"> </span><span class="pun">}</span></code></li><li class="L6"><code><span class="pun">{</span><span class="pln"> </span><span class="str">"_id"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="typ">ObjectId</span><span class="pun">(</span><span class="str">"5ab4c37d28e0721a97dcd395"</span><span class="pun">),</span><span class="pln"> </span><span class="str">"name"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"LiSi"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"major"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"AI"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"score"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">58</span><span class="pun">,</span><span class="pln"> </span><span class="str">"skill"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="str">"C++"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Python"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Java"</span><span class="pln"> </span><span class="pun">]</span><span class="pln"> </span><span class="pun">}</span></code></li><li class="L7"><code><span class="pun">{</span><span class="pln"> </span><span class="str">"_id"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="typ">ObjectId</span><span class="pun">(</span><span class="str">"5ab4cebf28e0721a97dcd396"</span><span class="pun">),</span><span class="pln"> </span><span class="str">"name"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"WangWu"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"major"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"Null"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"score"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="str">"skill"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="str">"Sleep"</span><span class="pln"> </span><span class="pun">]</span><span class="pln"> </span><span class="pun">}</span></code></li><li class="L8"><code><span class="pun">{</span><span class="pln"> </span><span class="str">"_id"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="typ">ObjectId</span><span class="pun">(</span><span class="str">"5ab4cec128e0721a97dcd397"</span><span class="pun">),</span><span class="pln"> </span><span class="str">"name"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"WangWu"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"major"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"Null"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"score"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="str">"skill"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="str">"Sleep"</span><span class="pln"> </span><span class="pun">]</span><span class="pln"> </span><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="muvo">下面将分数为0分的同学移出student集合。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="ofcv"><ol class="linenums"><li class="L0"><code><span class="pun">&gt;</span><span class="pln"> db</span><span class="pun">.</span><span class="pln">student</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">({</span><span class="str">"score"</span><span class="pun">:</span><span class="lit">0</span><span class="pun">})</span></code></li><li class="L1"><code><span class="typ">WriteResult</span><span class="pun">({</span><span class="pln"> </span><span class="str">"nRemoved"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">})</span></code></li><li class="L2"><code><span class="pun">&gt;</span><span class="pln"> db</span><span class="pun">.</span><span class="pln">student</span><span class="pun">.</span><span class="pln">find</span><span class="pun">()</span></code></li><li class="L3"><code><span class="pun">{</span><span class="pln"> </span><span class="str">"_id"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="typ">ObjectId</span><span class="pun">(</span><span class="str">"5ab4c2a228e0721a97dcd394"</span><span class="pun">),</span><span class="pln"> </span><span class="str">"name"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"ZhangSan"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"major"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"CS"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"score"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">61</span><span class="pun">,</span><span class="pln"> </span><span class="str">"skill"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="str">"Redis"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"MongoDB"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Cassandra"</span><span class="pln"> </span><span class="pun">]</span><span class="pln"> </span><span class="pun">}</span></code></li><li class="L4"><code><span class="pun">{</span><span class="pln"> </span><span class="str">"_id"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="typ">ObjectId</span><span class="pun">(</span><span class="str">"5ab4c37d28e0721a97dcd395"</span><span class="pun">),</span><span class="pln"> </span><span class="str">"name"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"LiSi"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"major"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"AI"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"score"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">58</span><span class="pun">,</span><span class="pln"> </span><span class="str">"skill"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="str">"C++"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Python"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Java"</span><span class="pln"> </span><span class="pun">]</span><span class="pln"> </span><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="sc3s">可见，两个0分同学已被移出集合。 <br>
类似地，上述命令也可写为条件表达式：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="rgdb"><ol class="linenums"><li class="L0"><code><span class="pln">db</span><span class="pun">.</span><span class="pln">student</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">({</span><span class="str">"score"</span><span class="pun">:{</span><span class="pln">$lt</span><span class="pun">:</span><span class="lit">60</span><span class="pun">}})</span></code></li></ol></pre><p data-anchor-id="zs3l">可将60分以下的同学全部移除 <br>
4.查。 <br>
上述操作中find()已出现过多次，通过pretty()可将输出格式化。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="s4wk"><ol class="linenums"><li class="L0"><code><span class="pun">&gt;</span><span class="pln"> db</span><span class="pun">.</span><span class="pln">student</span><span class="pun">.</span><span class="pln">find</span><span class="pun">().</span><span class="pln">pretty</span><span class="pun">()</span></code></li><li class="L1"><code><span class="pun">{</span></code></li><li class="L2"><code><span class="pln">    </span><span class="str">"_id"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="typ">ObjectId</span><span class="pun">(</span><span class="str">"5ab4c2a228e0721a97dcd394"</span><span class="pun">),</span></code></li><li class="L3"><code><span class="pln">    </span><span class="str">"name"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"ZhangSan"</span><span class="pun">,</span></code></li><li class="L4"><code><span class="pln">    </span><span class="str">"major"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"CS"</span><span class="pun">,</span></code></li><li class="L5"><code><span class="pln">    </span><span class="str">"score"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">61</span><span class="pun">,</span></code></li><li class="L6"><code><span class="pln">    </span><span class="str">"skill"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span></code></li><li class="L7"><code><span class="pln">        </span><span class="str">"Redis"</span><span class="pun">,</span></code></li><li class="L8"><code><span class="pln">        </span><span class="str">"MongoDB"</span><span class="pun">,</span></code></li><li class="L9"><code><span class="pln">        </span><span class="str">"Cassandra"</span></code></li><li class="L0"><code><span class="pln">    </span><span class="pun">]</span></code></li><li class="L1"><code><span class="pun">}</span></code></li><li class="L2"><code><span class="pun">{</span></code></li><li class="L3"><code><span class="pln">    </span><span class="str">"_id"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="typ">ObjectId</span><span class="pun">(</span><span class="str">"5ab4c37d28e0721a97dcd395"</span><span class="pun">),</span></code></li><li class="L4"><code><span class="pln">    </span><span class="str">"name"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"LiSi"</span><span class="pun">,</span></code></li><li class="L5"><code><span class="pln">    </span><span class="str">"major"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">"AI"</span><span class="pun">,</span></code></li><li class="L6"><code><span class="pln">    </span><span class="str">"score"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">58</span><span class="pun">,</span></code></li><li class="L7"><code><span class="pln">    </span><span class="str">"skill"</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span></code></li><li class="L8"><code><span class="pln">        </span><span class="str">"C++"</span><span class="pun">,</span></code></li><li class="L9"><code><span class="pln">        </span><span class="str">"Python"</span><span class="pun">,</span></code></li><li class="L0"><code><span class="pln">        </span><span class="str">"Java"</span></code></li><li class="L1"><code><span class="pln">    </span><span class="pun">]</span></code></li><li class="L2"><code><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="3b4a">条件查询与SQL类似。形式为</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="g5ml"><ol class="linenums"><li class="L0"><code><span class="pun">等于：</span><span class="pln">      </span><span class="pun">{&lt;</span><span class="pln">key</span><span class="pun">&gt;:&lt;</span><span class="pln">value</span><span class="pun">&gt;}</span><span class="pln">  </span></code></li><li class="L1"><code><span class="pun">小于：</span><span class="pln">      </span><span class="pun">{&lt;</span><span class="pln">key</span><span class="pun">&gt;:{</span><span class="pln">$lt</span><span class="pun">:&lt;</span><span class="pln">value</span><span class="pun">&gt;}}</span></code></li><li class="L2"><code><span class="pun">小于等于：</span><span class="pln">  </span><span class="pun">{&lt;</span><span class="pln">key</span><span class="pun">&gt;:{</span><span class="pln">$lte</span><span class="pun">:&lt;</span><span class="pln">value</span><span class="pun">&gt;}}</span></code></li><li class="L3"><code><span class="pun">大于：</span><span class="pln">      </span><span class="pun">{&lt;</span><span class="pln">key</span><span class="pun">&gt;:{</span><span class="pln">$gt</span><span class="pun">:&lt;</span><span class="pln">value</span><span class="pun">&gt;}}</span></code></li><li class="L4"><code><span class="pun">大于等于：</span><span class="pln">  </span><span class="pun">{&lt;</span><span class="pln">key</span><span class="pun">&gt;:{</span><span class="pln">$gte</span><span class="pun">:&lt;</span><span class="pln">value</span><span class="pun">&gt;}}</span></code></li><li class="L5"><code><span class="pun">不等于：</span><span class="pln">    </span><span class="pun">{&lt;</span><span class="pln">key</span><span class="pun">&gt;:{</span><span class="pln">$ne</span><span class="pun">:&lt;</span><span class="pln">value</span><span class="pun">&gt;}}</span></code></li></ol></pre><p data-anchor-id="6nj4">多条件查询命令：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="jj1c"><ol class="linenums"><li class="L0"><code><span class="pln">AND</span><span class="pun">:</span><span class="pln">    db</span><span class="pun">.</span><span class="pln">student</span><span class="pun">.</span><span class="pln">find</span><span class="pun">({</span><span class="pln">key1</span><span class="pun">:</span><span class="pln">value1</span><span class="pun">,</span><span class="pln"> key2</span><span class="pun">:</span><span class="pln">value2</span><span class="pun">}).</span><span class="pln">pretty</span><span class="pun">()</span></code></li><li class="L1"><code><span class="pln">OR</span><span class="pun">:</span><span class="pln">     db</span><span class="pun">.</span><span class="pln">student</span><span class="pun">.</span><span class="pln">find</span><span class="pun">({</span><span class="pln">$or</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[{</span><span class="pln">key1</span><span class="pun">:</span><span class="pln"> value1</span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">key2</span><span class="pun">:</span><span class="pln">value2</span><span class="pun">}]}).</span><span class="pln">pretty</span><span class="pun">()</span></code></li><li class="L2"><code><span class="pun">同时：</span><span class="pln">  db</span><span class="pun">.</span><span class="pln">student</span><span class="pun">.</span><span class="pln">find</span><span class="pun">({</span><span class="pln">key1</span><span class="pun">:</span><span class="pln"> value1</span><span class="pun">,</span><span class="pln"> $or</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[{</span><span class="pln">key2</span><span class="pun">:</span><span class="pln">value2</span><span class="pun">},{</span><span class="pln">key3</span><span class="pun">:</span><span class="pln">value3</span><span class="pun">}]}).</span><span class="pln">pretty</span><span class="pun">()</span></code></li></ol></pre><hr><p data-anchor-id="am37"><strong>以下Java和Python中使用MongoDB仅为范例参考，完成上机目标不限定具体语言和工具。</strong></p><div class="md-section-divider"></div><h2 data-anchor-id="9o2m" id="java中使用mongodb"><i class="icon-pencil"></i> <strong>Java中使用MongoDB</strong></h2><p data-anchor-id="07p5">1.首先需要下载驱动包 <a href="http://central.maven.org/maven2/org/mongodb/mongo-java-driver/3.6.3/mongo-java-driver-3.6.3.jar" target="_blank">mongo-java-driver-3.6.3.jar</a> <br>
2.在Java的Classpath中包含该驱动包的路径，或在IDE构建项目后导入该包 <br>
3.在你的Java项目中运行如下代码(注意:确保你的MongoDB服务端正常运行中)</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="zvc1"><ol class="linenums"><li class="L0"><code class="language-Java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">ArrayList</span><span class="pun">;</span></code></li><li class="L1"><code class="language-Java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">List</span><span class="pun">;</span></code></li><li class="L2"><code class="language-Java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">bson</span><span class="pun">.</span><span class="typ">Document</span><span class="pun">;</span></code></li><li class="L3"><code class="language-Java"><span class="kwd">import</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">mongodb</span><span class="pun">.</span><span class="typ">MongoClient</span><span class="pun">;</span></code></li><li class="L4"><code class="language-Java"><span class="kwd">import</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">mongodb</span><span class="pun">.</span><span class="pln">client</span><span class="pun">.</span><span class="typ">FindIterable</span><span class="pun">;</span></code></li><li class="L5"><code class="language-Java"><span class="kwd">import</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">mongodb</span><span class="pun">.</span><span class="pln">client</span><span class="pun">.</span><span class="typ">MongoCollection</span><span class="pun">;</span></code></li><li class="L6"><code class="language-Java"><span class="kwd">import</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">mongodb</span><span class="pun">.</span><span class="pln">client</span><span class="pun">.</span><span class="typ">MongoCursor</span><span class="pun">;</span></code></li><li class="L7"><code class="language-Java"><span class="kwd">import</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">mongodb</span><span class="pun">.</span><span class="pln">client</span><span class="pun">.</span><span class="typ">MongoDatabase</span><span class="pun">;</span></code></li><li class="L8"><code class="language-Java"><span class="kwd">import</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">mongodb</span><span class="pun">.</span><span class="pln">client</span><span class="pun">.</span><span class="pln">model</span><span class="pun">.</span><span class="typ">Filters</span><span class="pun">;</span></code></li><li class="L9"><code class="language-Java"></code></li><li class="L0"><code class="language-Java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">TryMongodb</span><span class="pun">{</span></code></li><li class="L1"><code class="language-Java"><span class="pln">   </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> args</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">){</span></code></li><li class="L2"><code class="language-Java"><span class="pln">        </span><span class="kwd">try</span><span class="pun">{</span><span class="pln">   </span></code></li><li class="L3"><code class="language-Java"><span class="pln">            </span><span class="com">// 连接到 mongodb 服务</span></code></li><li class="L4"><code class="language-Java"><span class="pln">            </span><span class="typ">MongoClient</span><span class="pln"> mongoClient </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MongoClient</span><span class="pun">(</span><span class="pln"> </span><span class="str">"localhost"</span><span class="pln"> </span><span class="pun">,</span><span class="pln"> </span><span class="lit">27017</span><span class="pln"> </span><span class="pun">);</span></code></li><li class="L5"><code class="language-Java"><span class="pln">            </span><span class="com">// 连接到数据库</span></code></li><li class="L6"><code class="language-Java"><span class="pln">            </span><span class="typ">MongoDatabase</span><span class="pln"> mongoDatabase </span><span class="pun">=</span><span class="pln"> mongoClient</span><span class="pun">.</span><span class="pln">getDatabase</span><span class="pun">(</span><span class="str">"test"</span><span class="pun">);</span><span class="pln">  </span></code></li><li class="L7"><code class="language-Java"><span class="pln">            </span><span class="com">//创建集合</span></code></li><li class="L8"><code class="language-Java"><span class="pln">            mongoDatabase</span><span class="pun">.</span><span class="pln">createCollection</span><span class="pun">(</span><span class="str">"student"</span><span class="pun">);</span></code></li><li class="L9"><code class="language-Java"><span class="pln">            </span><span class="com">//选择集合</span></code></li><li class="L0"><code class="language-Java"><span class="pln">            </span><span class="typ">MongoCollection</span><span class="pun">&lt;</span><span class="typ">Document</span><span class="pun">&gt;</span><span class="pln"> collection </span><span class="pun">=</span><span class="pln"> mongoDatabase</span><span class="pun">.</span><span class="pln">getCollection</span><span class="pun">(</span><span class="str">"student"</span><span class="pun">);</span></code></li><li class="L1"><code class="language-Java"><span class="pln">            </span><span class="com">//插入文档</span></code></li><li class="L2"><code class="language-Java"><span class="pln">            </span><span class="typ">Document</span><span class="pln"> document </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Document</span><span class="pun">(</span><span class="str">"name"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"ZhangSan"</span><span class="pun">).</span><span class="pln">append</span><span class="pun">(</span><span class="str">"major"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"CS"</span><span class="pun">).</span><span class="pln">append</span><span class="pun">(</span><span class="str">"score"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">59</span><span class="pun">);</span><span class="pln">  </span></code></li><li class="L3"><code class="language-Java"><span class="pln">            </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Document</span><span class="pun">&gt;</span><span class="pln"> documents </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ArrayList</span><span class="pun">&lt;</span><span class="typ">Document</span><span class="pun">&gt;();</span><span class="pln">  </span></code></li><li class="L4"><code class="language-Java"><span class="pln">            documents</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">document</span><span class="pun">);</span><span class="pln">  </span></code></li><li class="L5"><code class="language-Java"><span class="pln">            collection</span><span class="pun">.</span><span class="pln">insertMany</span><span class="pun">(</span><span class="pln">documents</span><span class="pun">);</span><span class="pln"> </span></code></li><li class="L6"><code class="language-Java"><span class="pln">            </span><span class="com">//检索文档</span></code></li><li class="L7"><code class="language-Java"><span class="pln">            </span><span class="typ">FindIterable</span><span class="pun">&lt;</span><span class="typ">Document</span><span class="pun">&gt;</span><span class="pln"> findIterable </span><span class="pun">=</span><span class="pln"> collection</span><span class="pun">.</span><span class="pln">find</span><span class="pun">();</span><span class="pln">  </span></code></li><li class="L8"><code class="language-Java"><span class="pln">            </span><span class="typ">MongoCursor</span><span class="pun">&lt;</span><span class="typ">Document</span><span class="pun">&gt;</span><span class="pln"> mongoCursor </span><span class="pun">=</span><span class="pln"> findIterable</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">();</span><span class="pln">  </span></code></li><li class="L9"><code class="language-Java"><span class="pln">            </span><span class="kwd">while</span><span class="pun">(</span><span class="pln">mongoCursor</span><span class="pun">.</span><span class="pln">hasNext</span><span class="pun">()){</span><span class="pln">  </span></code></li><li class="L0"><code class="language-Java"><span class="pln">                </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="pln">mongoCursor</span><span class="pun">.</span><span class="kwd">next</span><span class="pun">());</span><span class="pln">  </span></code></li><li class="L1"><code class="language-Java"><span class="pln">            </span><span class="pun">}</span><span class="pln">  </span></code></li><li class="L2"><code class="language-Java"><span class="pln">            </span><span class="com">//更新文档</span></code></li><li class="L3"><code class="language-Java"><span class="pln">            collection</span><span class="pun">.</span><span class="pln">updateMany</span><span class="pun">(</span><span class="typ">Filters</span><span class="pun">.</span><span class="pln">eq</span><span class="pun">(</span><span class="str">"score"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">59</span><span class="pun">),</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Document</span><span class="pun">(</span><span class="str">"$set"</span><span class="pun">,</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Document</span><span class="pun">(</span><span class="str">"likes"</span><span class="pun">,</span><span class="lit">61</span><span class="pun">)));</span></code></li><li class="L4"><code class="language-Java"><span class="pln">            </span><span class="com">//删除文档</span></code></li><li class="L5"><code class="language-Java"><span class="pln">            </span><span class="com">//删除符合条件的第一个文档  </span></code></li><li class="L6"><code class="language-Java"><span class="pln">            collection</span><span class="pun">.</span><span class="pln">deleteOne</span><span class="pun">(</span><span class="typ">Filters</span><span class="pun">.</span><span class="pln">eq</span><span class="pun">(</span><span class="str">"score"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">61</span><span class="pun">));</span><span class="pln">  </span></code></li><li class="L7"><code class="language-Java"><span class="pln">            </span><span class="com">//删除所有符合条件的文档  </span></code></li><li class="L8"><code class="language-Java"><span class="pln">            collection</span><span class="pun">.</span><span class="pln">deleteMany </span><span class="pun">(</span><span class="typ">Filters</span><span class="pun">.</span><span class="pln">eq</span><span class="pun">(</span><span class="str">"score"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">61</span><span class="pun">));</span><span class="pln">  </span></code></li><li class="L9"><code class="language-Java"><span class="pln">        </span><span class="pun">}</span><span class="kwd">catch</span><span class="pun">(</span><span class="typ">Exception</span><span class="pln"> e</span><span class="pun">){</span></code></li><li class="L0"><code class="language-Java"><span class="pln">            </span><span class="typ">System</span><span class="pun">.</span><span class="pln">err</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">getClass</span><span class="pun">().</span><span class="pln">getName</span><span class="pun">()</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="str">": "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span></code></li><li class="L1"><code class="language-Java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L2"><code class="language-Java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3"><code class="language-Java"><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="av51" id="python中使用mongodb"><i class="icon-pencil"></i> <strong>Python中使用MongoDB</strong></h2><p data-anchor-id="2yw0">1.安装</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="mm9r"><ol class="linenums"><li class="L0"><code><span class="pln">pip install pymongo</span></code></li></ol></pre><p data-anchor-id="3o3b">2.在你的Python项目中运行如下代码</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="zsa5"><ol class="linenums"><li class="L0"><code class="language-Python"><span class="kwd">import</span><span class="pln"> pymongo</span></code></li><li class="L1"><code class="language-Python"><span class="kwd">from</span><span class="pln"> pymongo </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">MongoClient</span></code></li><li class="L2"><code class="language-Python"></code></li><li class="L3"><code class="language-Python"><span class="com">#连接MongoDB服务</span></code></li><li class="L4"><code class="language-Python"><span class="pln">client </span><span class="pun">=</span><span class="pln"> </span><span class="typ">MongoClient</span><span class="pun">(</span><span class="str">'localhost'</span><span class="pun">,</span><span class="lit">27017</span><span class="pun">)</span></code></li><li class="L5"><code class="language-Python"><span class="com">#选择数据库及集合</span></code></li><li class="L6"><code class="language-Python"><span class="pln">db </span><span class="pun">=</span><span class="pln"> client</span><span class="pun">.</span><span class="pln">test</span></code></li><li class="L7"><code class="language-Python"><span class="pln">student </span><span class="pun">=</span><span class="pln"> db</span><span class="pun">.</span><span class="pln">student</span></code></li><li class="L8"><code class="language-Python"></code></li><li class="L9"><code class="language-Python"><span class="com">#插入单个文档</span></code></li><li class="L0"><code class="language-Python"><span class="pln">student1 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="str">"name"</span><span class="pun">:</span><span class="str">"ZhangSan"</span><span class="pun">,</span><span class="str">"major"</span><span class="pun">:</span><span class="str">"CS"</span><span class="pun">,</span><span class="str">"score"</span><span class="pun">:</span><span class="lit">59</span><span class="pun">}</span></code></li><li class="L1"><code class="language-Python"><span class="pln">rs1 </span><span class="pun">=</span><span class="pln"> student</span><span class="pun">.</span><span class="pln">insert_one</span><span class="pun">(</span><span class="pln">student1</span><span class="pun">)</span></code></li><li class="L2"><code class="language-Python"><span class="kwd">print</span><span class="pun">(</span><span class="str">'One post: {0}'</span><span class="pun">.</span><span class="pln">format</span><span class="pun">(</span><span class="pln">rs1</span><span class="pun">.</span><span class="pln">inserted_id</span><span class="pun">))</span></code></li><li class="L3"><code class="language-Python"><span class="com">#插入多个文档</span></code></li><li class="L4"><code class="language-Python"><span class="pln">student2 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="str">"name"</span><span class="pun">:</span><span class="str">"LiSi"</span><span class="pun">,</span><span class="str">"major"</span><span class="pun">:</span><span class="str">"AI"</span><span class="pun">,</span><span class="str">"score"</span><span class="pun">:</span><span class="lit">58</span><span class="pun">}</span></code></li><li class="L5"><code class="language-Python"><span class="pln">student3 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="str">"name"</span><span class="pun">:</span><span class="str">"WangWu"</span><span class="pun">,</span><span class="str">"major"</span><span class="pun">:</span><span class="str">"Null"</span><span class="pun">,</span><span class="str">"score"</span><span class="pun">:</span><span class="lit">0</span><span class="pun">}</span></code></li><li class="L6"><code class="language-Python"><span class="pln">rs23 </span><span class="pun">=</span><span class="pln"> student</span><span class="pun">.</span><span class="pln">insert_many</span><span class="pun">([</span><span class="pln">student2</span><span class="pun">,</span><span class="pln"> student3</span><span class="pun">])</span></code></li><li class="L7"><code class="language-Python"><span class="kwd">print</span><span class="pun">(</span><span class="str">'Multiple users: {0}'</span><span class="pun">.</span><span class="pln">format</span><span class="pun">(</span><span class="pln">rs23</span><span class="pun">.</span><span class="pln">inserted_ids</span><span class="pun">))</span></code></li><li class="L8"><code class="language-Python"></code></li><li class="L9"><code class="language-Python"><span class="com">#检索文档</span></code></li><li class="L0"><code class="language-Python"><span class="pln">student_tmp </span><span class="pun">=</span><span class="pln"> student</span><span class="pun">.</span><span class="pln">find_one</span><span class="pun">({</span><span class="str">"major"</span><span class="pun">:</span><span class="str">"CS"</span><span class="pun">})</span></code></li><li class="L1"><code class="language-Python"><span class="kwd">print</span><span class="pun">(</span><span class="pln">student_tmp</span><span class="pun">)</span></code></li><li class="L2"><code class="language-Python"></code></li><li class="L3"><code class="language-Python"><span class="com">#条件查询</span></code></li><li class="L4"><code class="language-Python"><span class="pln">rs </span><span class="pun">=</span><span class="pln"> student</span><span class="pun">.</span><span class="pln">find</span><span class="pun">({</span><span class="str">'score'</span><span class="pun">:{</span><span class="str">"$lt"</span><span class="pun">:</span><span class="lit">60</span><span class="pun">}}).</span><span class="pln">sort</span><span class="pun">(</span><span class="str">"name"</span><span class="pun">)</span></code></li><li class="L5"><code class="language-Python"><span class="kwd">for</span><span class="pln"> tmp </span><span class="kwd">in</span><span class="pln"> rs</span><span class="pun">:</span></code></li><li class="L6"><code class="language-Python"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="pln">tmp</span><span class="pun">)</span></code></li><li class="L7"><code class="language-Python"></code></li><li class="L8"><code class="language-Python"><span class="com">#更新文档</span></code></li><li class="L9"><code class="language-Python"><span class="pln">student</span><span class="pun">.</span><span class="pln">update</span><span class="pun">({</span><span class="str">"name"</span><span class="pun">:</span><span class="str">"ZhangSan"</span><span class="pun">},{</span><span class="str">'$set'</span><span class="pun">:{</span><span class="str">"score"</span><span class="pun">:</span><span class="lit">100</span><span class="pun">}})</span></code></li><li class="L0"><code class="language-Python"><span class="com">#删除文档</span></code></li><li class="L1"><code class="language-Python"><span class="pln">student</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">({</span><span class="str">"score"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="str">"$lt"</span><span class="pun">:</span><span class="lit">10</span><span class="pun">}})</span></code></li><li class="L2"><code class="language-Python"></code></li><li class="L3"><code class="language-Python"></code></li><li class="L4"><code class="language-Python"></code></li><li class="L5"><code class="language-Python"></code></li></ol></pre></div>
</body>
</html>